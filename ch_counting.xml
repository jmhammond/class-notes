<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="ch_counting">
  <title>Counting Techniques</title>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-basics">
    <title>
      The Multiplicative and Additive Principles
    </title>

    <note>
      <statement>
        <p>
          A standard deck of playing cards contains four <term>suits</term> (spade, heart, club, diamond). There are 13 cards in each suit (2,3,4,5,6,7,8,9,10, Jack, Queen, King, Ace). <term>Face cards</term> refers to jacks, queens, and kings. Spades and clubs are black and hearts and diamonds are red.
        </p>
      </statement>
    </note>


    <definition>
      <statement>
        <p>
          The <term>multiplicative principle</term> states that if an event <m>A</m> can occur <m>m</m> ways and an event <m>B</m> can occur <n>n</n> ways, then the event <q><m>A \and B</m></q> can occur <m>m\cdot n</m> ways.
        </p>
        <p>
          The multiplicative principle generalizes to more than two events.
        </p>
      </statement>
    </definition>

    <example>
      <statement>
        <p>
          If in your closet you have five ironic t-shirts, three pairs of pants, and three collegiate hats, how many different outfits do you have? Here an outfit is pants, shirt, hat.
        </p>
      </statement>
    </example>


    <example>
      <statement>
        <p>
          How many six character license plates can there be if the first three characters are letters and the second three characters are numbers? 
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          How many playing cards in a standard deck are both red and face cards? 
        </p>
      </statement>
    </example>


    <definition>
      <statement>
        <p>
          The <term>additive principle</term> states that if event <m>A</m> can occur <m>m</m> ways and event <m>B</m> can occur <m>n</m> ways and the two events are disjoint, then the event <q><m>A \text{ or } B</m></q> can occur <m>m + n</m> ways.
        </p>
      </statement>
    </definition>

    <example>
      <statement>
        <p>
          If in your closet you have five ironic t-shirts, three pairs of pants, and three collegiate hats, how many different items do you have in your closet? 
        </p>
      </statement>
    </example>

    <definition>
      <title>Counting principles in terms of sets:</title>
      <statement>
        <p>
          Let <m>A \and B</m> be two sets. Then:
          <ol>
            <li>
              <p>
                <m>|A \times B| = |A| \cdot |B|</m>.
              </p>
            </li>
            <li>
              <p>
                If <m>A \cap B = \emptyset</m>, then <m>|A\cup B| = |A| + |B|</m>
              </p>
            </li>
          </ol> 
        </p>
      </statement>
    </definition>

    <definition>
      <title>The Principle of Inclusion-Exclusion</title>
      <statement>
        <p>
          If <m>A \and B</m> are two sets, then <m>|A \cup B| = |A| + |B| - |A \cap B|</m>
        </p>
        <p>
          Note that this is like the additive principle, except we're removing the occurances that are in common between <m>A</m> and <m>B</m>.
        </p>
      </statement>
    </definition>


    <example>
      <statement>
        <p>
          Suppose a company receives 350 applications from college graduates for a job. Suppose 220 of these applicants majored in computer science, 147 majored in business, and 51 majored in both computer science and business. How many majored in neither computer science nor business? 
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          We will now consider <term>bit strings</term> which are strings of characters containing only <m>0</m> and <m>1</m>. For example, these are bit strings: <m>0011, 1010, 110,</m> etc.
        </p>
        <p>
          How many bit strings of length eight either start with a 1 bit or end with two bits 00? 
        </p>
      </statement>
    </example>



    <example>
      <statement>
        <p>
          There are 30 people in a club. Assuming everyone is qualified to serve in any position, how many different ways are there to assign a president, vice-president, secretary, and treasurer?
        </p>
      </statement>
    </example>


    <note>
      <statement>
        <p>
          The Principle of Inclusion-Exclusion applies to more than two sets. For any finite sets <m>A, B, \and C</m>,
          <me> |A \cup B \cup C| = |A| + |B| + |C| - |A \cap B| - |A \cap C| - |B \cap C| + |A \cap B \cap C|</me>
        </p>
      </statement>
    </note>

    <example>
      <statement>
        <p>
          Suppose we surveyed a class of 41 students, asking if they could play an Accordion, a Bassoon, or a Clarinet. 12 could play the clarinet, 8 could play bassoon, and 5 the accordian. 6 played clarinet and bassoon, 2 played clarinet and accordion, and 3 played bassoon and accordion. One student played all three. 
        </p>
        <p>
          How many students can play at least one instrument? Solve this first by Venn Diagrams, then by PIE.
        </p>
      </statement>
    </example>



    <!-- <!-\- the following comes from https://github.com/oscarlevin/discrete-book -\-> -->
    <!-- <exercise> -->
    <!--   <statement> -->
    <!--     <p> -->
    <!--       The game TENZI comes with 40 six-sided dice (each numbered 1 to 6). Suppose you roll all 40 dice. -->
    <!--       <ol> -->
    <!--         <li> Prove that there will be at least seven dice that land on the same number.</li> -->
    <!--         <li> -->
    <!--           <p> -->
    <!--             How many dice would you have to roll before you were guaranteed that some four of them would all match or all be different? Prove your answer. -->
    <!--           </p> -->
    <!--         </li> -->
    <!--       </ol> -->
    <!--     </p> -->
    <!--   </statement> -->
    <!--   <solution> -->
    <!--     <p> -->
    <!--       <ol> -->
    <!--         <li> -->
    <!--           <p> -->
    <!--             This is an example of the pigeonhole principle. We can prove it by contrapositive. -->
    <!--           </p> -->

    <!--           <proof> -->
    <!--             <p> -->
    <!--               Suppose that each number only came up 6 or fewer times. So there are at most six 1's, six 2's, and so on. That's a total of 36 dice, so you must not have rolled all 40 dice. -->
    <!--             </p> -->
    <!--           </proof> -->
    <!--         </li> -->

    <!--         <li> -->
    <!--           <p> -->
    <!--             We can have 9 dice without any four matching or any four being all different: three 1's, three 2's, three 3's. We will prove that whenever you roll 10 dice, you will always get four matching or all being different. -->
    <!--           </p> -->

    <!--           <proof> -->
    <!--             <p> -->
    <!--               Suppose you roll 10 dice, but that there are NOT four matching rolls. This means at most, there are three of any given value. If we only had three different values, that would be only 9 dice, so there must be 4 different values, giving 4 dice that are all different. -->
    <!--             </p> -->
    <!--           </proof> -->
    <!--         </li> -->
    <!--       </ol> -->
    <!--     </p> -->
    <!--   </solution> -->
    <!-- </exercise> -->


    <definition>
      <title>The Pigeonhole Principal</title>
      <statement>
        <p>
          If <m>k</m> is a positive integer and <m>k+1</m> objects are placed into <m>k</m> boxes, then at least one box has two or more objects.
        </p>
      </statement>
    </definition>

    <example>
      <statement>
        <p>
          <ol>
            <li> If there are 13 people, at least two of them have the same birth month. </li>
            <li> If there are 10 cars at a restaurant, but 11 people there, then at least two people car pooled.</li>
            <li> etc...</li>
          </ol>
        </p>
      </statement>
    </example>

    <theorem>
      <title>The Generalized Pigeonhole Principal</title>
      <statement>
        <p>
          If <m>N</m> objects are placed into <m>k</m> boxes, then there is at least one box with <m>\left\lceil \dfrac{N}{k} \right\rceil</m>. 
        </p>
      </statement>
    </theorem>

    <example>
      <statement>
        <p>
          If there are 100 people in a large lecture hall, then at least <m>\left\lceil \dfrac{100}{12} \right\rceil = 9</m> have the same birth month.
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          How many cards must be selected from a standard deck of 52 cards in order that at least three have the same suit? 
        </p>
      </statement>
      <solution>
        According to the Generalized Pigeonhole Principle, we want to determine the number of cards, <m>N</m>, that must be drawn (here <m>k = 4</m> suits):
        <me> \left\lceil \dfrac{N}{4} \right\rceil \ge 3</me>
        So <m>N = 9</m>.
      </solution>
    </example>






    <exercises>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Your wardrobe consists of 5 shirts, 3 pairs of pants, and 17 bow ties<idx><h>bow ties</h></idx>. How many different outfits can you make?
          </p>
        </statement>
        <solution>
          <p>
            There are 255 outfits. Use the multiplicative principle.
          </p>
        </solution>
      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            For your college interview, you must wear a tie. You own 3 regular (boring) ties and 5 (cool) bow ties.
            <ol>
              <li>
                How many choices do you have for your neck-wear?
              </li>
              <li>
                <p>
                  You realize that the interview is for clown college, so you should probably wear both a regular tie and a bow tie. How many choices do you have now?
                </p>
              </li>
              <li>
                <p>
                  For the rest of your outfit, you have 5 shirts, 4 skirts, 3 pants, and 7 dresses. You want to select either a shirt to wear with a skirt or pants, or just a dress. How many outfits do you have to choose from?
                </p>
              </li>

            </ol>
          </p>
        </statement>

        <solution>
          <p>
            <ol>
              <li>
                <p>
                  8 ties.  Use the additive principle.
                </p>
              </li>
              <li>15 ties. Use the multiplicative principle</li>
              <li>
              <m>5\cdot (4+3) + 7 = 42</m> outfits.</li>
            </ol>
          </p>
        </solution>
      </exercise>


      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Your Blu-ray collection consists of 9 comedies and 7 horror movies. Give an example of a question for which the answer is:
            <ol>
              <li>
                <p>
                  16.
                </p>
              </li>
              <li>
                <p>
                  63.
                </p>
              </li>
            </ol>
          </p>
        </statement>
        <solution>
          <p>
            <ol>
              <li>
                <p>
                  For example, 16 is the number of choices you have if you want to watch one movie, either a comedy or horror flick.
                </p>
              </li>
              <li>
                <p>
                  For example, 63 is the number of choices you have if you will watch two movies, first a comedy and then a horror.
                </p>
              </li>
            </ol>
          </p>
        </solution>
      </exercise>

      <!-- <!-\- the following comes from https://github.com/oscarlevin/discrete-book -\-> -->
      <!-- <exercise> -->
      <!--   <statement> -->
      <!--     <p> -->
      <!--       We usually write numbers in decimal form (or base 10), meaning numbers are composed using 10 different <q>digits</q> <m>\{0,1,\ldots, 9\}</m>. Sometimes though it is useful to write numbers <term>hexadecimal</term> or base 16. Now there are 16 distinct digits that can be used to form numbers: <m>\{0, 1, \ldots, 9, \mathrm{A, B, C, D, E, F}\}</m>. So for example, a 3 digit hexadecimal number might be 2B8. -->
      <!--       <ol> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             How many 2-digit hexadecimals are there in which the first digit is E or F? Explain your answer in terms of the additive principle (using either events or sets). -->
      <!--           </p> -->
      <!--         </li> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             Explain why your answer to the previous part is correct in terms of the multiplicative principle (using either events or sets). Why do both the additive and multiplicative principles give you the same answer? -->
      <!--           </p> -->
      <!--         </li> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             How many 3-digit hexadecimals start with a letter (A-F) and end with a numeral (0-9)? Explain. -->
      <!--           </p> -->
      <!--         </li> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             How many 3-digit hexadecimals start with a letter (A-F) or end with a numeral (0-9) (or both)? Explain. -->
      <!--           </p> -->
      <!--         </li> -->
      <!--       </ol> -->
      <!--     </p> -->
      <!--   </statement> -->
      <!-- </exercise> -->



      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Suppose you have sets <m>A</m> and <m>B</m> with <m>\card{A} = 10</m> and <m>\card{B} = 15</m>.
            <ol>
              <li>What is the largest possible value for <m>\card{A \cap B}</m>?</li>
              <li> What is the smallest possible value for <m>\card{A \cap B}</m>?</li><li> What are the possible values for <m>\card{A \cup B}</m>?</li>
            </ol>
          </p>
        </statement>

        <solution>
          <p>
            <ol>
              <li>To maximize the number of elements in common between <m>A</m> and <m>B</m>, make <m>A \subset B</m>.  This would give <m>\card{A \cap B} = 10</m>.</li>
              <li><m>A</m> and <m>B</m> might have no elements in common, giving <m>\card{A\cap B} = 0</m>.</li>
              <li> <m>15 \le \card{A \cup B} \le 25</m>.  In fact, when <m>\card{A \cap B} = 0</m> then <m>\card{A \cup B} = 25</m> and when <m>\card{A \cap B} = 10</m> then <m>\card{A \cup B} = 15</m>. </li>
            </ol>
          </p>
        </solution>
      </exercise>


      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            If <m>\card{A} = 8</m> and <m>\card{B} = 5</m>, what is <m>\card{A \cup B} + \card{A \cap B}</m>?
          </p>
        </statement>
        <solution>
          <p>
            <m>\card{A \cup B} + \card{A \cap B} = 13</m>.  Use PIE: we know <m>\card{A \cup B} = 8 + 5 - \card{A \cap B}</m>.
          </p>
        </solution>
      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            In a recent survey, 30 students reported whether they liked their potatoes Mashed, French-fried, or Twice-baked. 15 liked them mashed, 20 liked French fries, and 9 liked twice baked potatoes. Additionally, 12 students liked both mashed and fried potatoes, 5 liked French fries and twice baked potatoes, 6 liked mashed and baked, and 3 liked all three styles. How many students
            <em>hate</em> potatoes? Explain why your answer is correct.
          </p>
        </statement>
      </exercise>




      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            For how many <m>n \in \{1,2, \ldots, 500\}</m> is <m>n</m> a multiple of one or more of 5, 6, or 7?
          </p>
        </statement>
        <hint>
          <p>
            To find out how many numbers are divisible by 6 and 7, for example, take <m>500/42</m> and round down.
          </p>
        </hint>
      </exercise>




      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p> Let <m>A</m>, <m>B</m>, and <m>C</m> be sets.
          <ol>
            <li>
              Find <m>\card{(A \cup C)\setminus B}</m> provided <m>\card{A} = 50</m>, <m>\card{B} = 45</m>, <m>\card{C} = 40</m>, <m>\card{A\cap B} = 20</m>, <m>\card{A \cap C} = 15</m>, <m>\card{B \cap C} = 23</m>, and <m>\card{A \cap B \cap C} = 12</m>.
            </li>
            <li>
              Describe a set in terms of <m>A</m>, <m>B</m>, and <m>C</m> with cardinality 26.
            </li>

          </ol>
          </p>
        </statement>
      </exercise>


      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Consider all 5 letter <q>words</q> made from the letters <m>a</m> through <m>h</m>. (Recall, words are just strings of letters, not necessarily actual English words.)
            <ol>
              <li>
                <p>
                  How many of these words are there total?
                </p>
              </li>
              <li>
                <p>
                  How many of these words contain no repeated letters?
                </p>
              </li>
              <li>
                <p>
                  How many of these words start with the sub-word <q>aha</q>?
                </p>
              </li>
              <li>
                <p>
                  How many of these words either start with <q>aha</q> or end with <q>bah</q> or both?
                </p>
              </li>
              <li>
                <p>
                How many of the words containing no repeats also do not contain the sub-word <q>bad</q>?</p>
              </li>
            </ol>
          </p>
        </statement>
        <solution>
          <p>
            <ol>
              <li><m>8^5 = 32768</m> words, since you select from 8 letters 5 times.</li>
              <li><m>8\cdot 7\cdot 6\cdot 5\cdot 4 = 6720</m> words. After selecting a letter, you have fewer letters to select for the next one.</li>
              <li>
                <p>
                  <m>8 \cdot 8 =64</m> words: you need to select the 4th and 5th letters.
                </p>
              </li>
              <li><m>64 + 64 - 0 = 128</m> words. There are 64 words which start with <q>aha</q> and another 64 words that end with <q>bah.</q> Perhaps we over counted the words that both start with <q>aha</q> and end with <q>bah</q>, but since the words are only 5 letters long, there are no such words.</li>
              <li><m>(8\cdot 7\cdot 6\cdot 5\cdot 4) - 3\cdot (5\cdot 4) = 6660</m> words. All the words minus the bad ones. The taboo word can be in any of three positions (starting with letter 1, 2, or 3) and for each position we must choose the other two letters (from the remaining 5 letters).</li>
            </ol>
          </p>
        </solution>
      </exercise>


      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            For how many three digit numbers (100 to 999) is the <em>sum of the digits</em> even? (For example, <m>343</m> has an even sum of digits: <m>3+4+3 = 10</m> which is even.) Find the answer and explain why it is correct in at least two <em>different</em> ways.
          </p>
        </statement>
      </exercise>


      <exercise>
        <statement>
          <p>
            Suppose a drawer has a dozen brown socks and a dozen black socks (all thrown together).
            <ol>
              <li> How many socks must be taken out at random to guarantee a match (of any color)? </li>
              <li> How many socks must be taken out at random to guarantee at least two are black socks? </li>
            </ol>
          </p>
        </statement>
        <solution>
          <p>
            <ol>
              <li> 3 socks. Honestly, if you don't care about color, this is an argument for never folding socks. </li>
              <li> 14. I could have grabbed 12 brown socks in a row, so in this worst-case scenario, two black socks are the last I picked.</li>
            </ol>
          </p>
        </solution>
      </exercise>

      <exercise>
        <statement>
          <p>
            If there are 38 different time periods during which classes can be scheduled, and there are 677 different classes, how many rooms are required?
          </p>
        </statement>
        <solution>
          <p>
            <m>\left\lceil \dfrac{677}{38} \right\rceil = 18</m>  rooms.
          </p>
        </solution>
      </exercise>
      <exercise>
        <statement>
          <p>
            Assuming that no one has more than 1,000,000 hairs on their head and that the population of New York City was 8,008,278 in 2010, what is the least number of people in NYC in 2010 with the same number of hairs on their heads? 
          </p>
        </statement>
      </exercise>

      <exercise>
        <statement>
          <p>
            Suppose that <m>a, b, c, d, \and e </m> are five different integers. Must some pair of them differ by a multiple of four? 
          </p>
        </statement>
        <solution>
          <p>
            There are a total of four different remainders modulo 4. According to the Generalized Pigenhole Principal, if we have 5 numbers divided among four different remainders, <m>\left\lceil \dfrac{5}{4} \right\rceil = 2</m> of them have to have the same remainder. Thus they differ by a multiple of four.
          </p>
        </solution>
      </exercise>
    </exercises>
  </section>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-combperm">
    <title>
      Combinations and Permutations
    </title>

    <definition>
      <statement>
        <p>
          A <term>permutation</term> is an ordered arrangement of objects.
        </p>
      </statement>
    </definition>

    <example>
      <statement>
        <p>
          If I want to arrange five books on a shelf, how many possible arrangements of the books are there?
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          How many functions <m>f: \{1,2,3\} \to \{1, 2, 3\}</m> are bijections? 
        </p>
      </statement>
    </example>


    <example>
      <statement>
        <p>
          If I only want to arrange three of the five books on my shelf, how many ways are there to do that?
        </p>
      </statement>
    </example>

    <theorem>
      <statement>
        <p>
          If <m>n</m> is a positive integer and <m>r</m> is an integer such that <m>1 \le r \le n</m>, then there are <m>P(n,r) = n\cdot (n-1) \cdot (n-2) \cdot \dots \cdot (n-(r-1))</m> <m>r</m>-permutations of a set of <m>n</m> elements.
        </p>
      </statement>
    </theorem>


    <corollary>
      <statement>
        <p>
          If <m>n</m> and <m>r</m> are integers with <m>0\le r \le n</m>, then:
          <me>P(n,r) = \dfrac{n!}{(n-r)!}</me>
        </p>
      </statement>
    </corollary>


    <example>
      <statement>
        <p>
          How many six-letter vanity license plates are there that have no repeated letters? 
        </p>
      </statement>
    </example>


    <example>
      <statement>
        <p>
          How many functions <m>f: \{1,2,3,4\} \to \{1,2,3,4,5,6\}</m> are injective? [Recall a function is injective <m>\forall a, \forall b ( f(a) = f(b)) \to ( a = b )</m>]
        </p>
      </statement>
    </example>

    <definition>
      <statement>
        <p>
          A <term>combination</term> is an unordered selection of objects.
        </p>
      </statement>
    </definition>


    <example>
      <statement>
        <p>
          If I want only to select three books from my five books on the bookshelf, in how many ways can I do this? 
        </p>
      </statement>
    </example>

    <note>
      <statement>
        <p>
          If <m>n \and r</m> are integers such that <m>0 \le r \le n</m>, then the number of <m>r</m>-combinations from a set of <m>n</m> elements is
          <me>\binom{n}{r} = \dfrac{n!}{r!(n-r)!}</me>
        </p>
      </statement>
    </note>

    <example>
      <statement>
        <p>
          How many ways are there to choose five out of ten friends to invite over for dinner?
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          Two of your ten friends, Tim and Tammy just broke up. They can't stand to be in a room together. How many ways are there to choose five out of ten friends to invite to dinner, ensuring that Tim and Tammy are not both invited?
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          How many three element subsets from a set of five elements are there?
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          From a standard deck of 52 cards, how many five card hands are possible?
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          How many five card cards have exactly the same suit? 
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          How many five card hands have at least one heart?
        </p>
      </statement>
    </example>

    <exercises>
      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            A pizza parlor offers 10 toppings.
            <ol>
              <li> <p> How many 3-topping pizzas could they put on their menu?  Assume double toppings are not allowed. </p> </li>
              <li> <p> How many total pizzas are possible, with between zero and ten toppings (but not double toppings) allowed? </p> </li>
              <li> <p> The pizza parlor will list the 10 toppings in two equal-sized columns on their menu.  How many ways can they arrange the toppings in the left column? </p> </li>
            </ol>
          </p>
        </statement>
        <solution>
          <p>
            <ol>
              <li><m>{10 \choose 3} = 120</m> pizzas.  We must choose (in no particular order) 3 out of the 10 toppings.</li>
              <li><m>2^{10} = 1024</m> pizzas.  Say yes or no to each topping.</li>
              <li><m>P(10,5) = 30240</m> ways.  Assign each of the 5 spots in the left column to a unique pizza topping.</li>
            </ol>
          </p>
        </solution>
      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            A combination lock consists of a dial with 40 numbers on it. To open the lock, you turn the dial to the right until you reach a first number, then to the left until you get to second number, then to the right again to the third number. The numbers must be distinct. How many different combinations are possible?
          </p>
        </statement>
        <solution>
          <p>
            Despite its name, we are not looking for a combination here. The order in which the three numbers appears matters. There are <m>P(40,3) = 40\cdot 39 \cdot 38</m> different possibilities for the <q>combination</q>. This is assuming you cannot repeat any of the numbers (if you could, the answer would be <m>40^3</m>).
          </p>
        </solution>
      </exercise>

      <!-- <!-\- the following comes from https://github.com/oscarlevin/discrete-book -\-> -->
      <!-- <exercise> -->
      <!--   <statement> -->
      <!--     <p> -->
      <!--       Using the digits 2 through 8, find the number of different 5-digit numbers such that: -->
      <!--       <ol> -->
      <!--         <li> <p> Digits can be used more than once. </p> </li> -->
      <!--         <li> <p> Digits cannot be repeated, but can come in any order. </p> </li> -->
      <!--         <li> <p> Digits cannot be repeated and must be written in increasing order. </p> </li> -->
      <!--         <li> <p> Which of the above counting questions is a combination and which is a permutation?  Explain why this makes sense. </p> </li> -->
      <!--       </ol> -->
      <!--     </p> -->
      <!--   </statement> -->
      <!-- </exercise> -->


      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            An <em>anagram</em> of a word is just a rearrangement of its letters. How many different anagrams of <q>uncopyrightable</q> are there? (This happens to be the longest common English word without any repeated letters.)
          </p>
        </statement>
      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            How many anagrams are there of the word <q>assesses</q> that start with the letter <q>a</q>?
          </p>
        </statement>
        <solution>
          <p>
            After the first letter (a), we must rearrange the remaining 7 letters. There are only two letters (s and e), so this is really just a bit-string question (think of s as 1 and e as 0). Thus there <m>{7 \choose 2} = 21</m> anagrams starting with <q>a</q>.
          </p>
        </solution>
      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            How many anagrams are there of <q>anagram</q>?
          </p>
        </statement>
      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            On a business retreat, your company of 20 businessmen and businesswomen go golfing.
            <ol>
              <li> <p> You need to divide up into foursomes (groups of 4 people): a first foursome, a second foursome, and so on.  How many ways can you do this? </p> </li>
              <li> <p> After all your hard work, you realize that in fact, you want each foursome to include one of the five Board members.  How many ways can you do this? </p> </li>
            </ol>
          </p>
        </statement>
        <solution>
          <p>
            <ol>
              <li><m>{20 \choose 4}{16 \choose 4}{12 \choose 4}{8 \choose 4}{4 \choose 4}</m> ways. Pick 4 out of 20 people to be in the first foursome, then 4 of the remaining 16 for the second foursome, and so on (use the multiplicative principle to combine).</li>
              <li><m>5!{15 \choose 3}{12 \choose 3}{9 \choose 3}{6 \choose 3}{3 \choose 3}</m> ways.  First determine the tee time of the 5 board members, then select 3 of the 15 non board members to golf with the first board member, then 3 of the remaining 12 to golf with the second, and so on.</li>
            </ol>
          </p>
        </solution>
      </exercise>

      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <exercise>
        <statement>
          <p>
            Consider sets <m>A</m> and <m>B</m> with <m>|A| = 10</m> and <m>|B| = 17</m>.
            <ol>
              <li>
                <p>
                  How many functions <m>f: A \to B</m> are there?
                </p>
              </li>
              <li>
                <p>
                  How many functions <m>f: A \to B</m> are injective?
                </p>
              </li>
            </ol>
          </p>
        </statement>
        <solution>
          <p>
            <ol>
              <li><m>17^{10}</m> functions.  There are 17 choices for the image of each element in the domain.</li>
              <li><m>P(17, 10)</m> injective functions.  There are 17 choices for image of the first element of the domain, then only 16 choices for the second, and so on.</li>
            </ol>
          </p>
        </solution>
      </exercise>

      <!-- <!-\- the following comes from https://github.com/oscarlevin/discrete-book -\-> -->
      <!-- <exercise> -->
      <!--   <statement> -->
      <!--     <p> -->
      <!--       Consider functions <m>f: \{1,2,3,4\} \to \{1,2,3,4,5,6\}</m>. -->
      <!--       <ol> -->
      <!--         <li> <p> How many functions are there total? </p> </li> -->
      <!--         <li> <p> How many functions are injective? </p> </li> -->
      <!--         <li><p> How many of the injective functions are <em>increasing</em>?  To be increasing means that if <m>a \lt b</m> then <m>f(a) \lt f(b)</m>, or in other words, the outputs get larger as the inputs get larger. </p></li> -->
      <!--       </ol> -->
      <!--     </p> -->
      <!--   </statement> -->
      <!-- </exercise> -->


      <!-- the following comes from https://github.com/oscarlevin/discrete-book -->
      <!-- <exercise> -->
      <!--   <statement> -->
      <!--     <p> -->
      <!--       We have seen that the formula for <m>P(n,k)</m> is <m>\dfrac{n!}{(n-k)!}</m>. Your task here is to explain <em>why</em> this is the right formula. -->
      <!--       <ol> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             Suppose you have 12 chips, each a different color. How many different stacks of 5 chips can you make? Explain your answer and why it is the same as using the formula for <m>P(12,5)</m>. -->


      <!--           </p> -->
      <!--         </li> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             Using the scenario of the 12 chips again, what does <m>12!</m> count? What does <m>7!</m> count? Explain. -->


      <!--           </p> -->
      <!--         </li> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             Explain why it makes sense to divide <m>12!</m> by <m>7!</m> when computing <m>P(12,5)</m> (in terms of the chips). -->


      <!--           </p> -->
      <!--         </li> -->
      <!--         <li> -->
      <!--           <p> -->
      <!--             Does your explanation work for numbers other than 12 and 5? Explain the formula <m>P(n,k) = \frac{n!}{(n-k)!}</m> using the variables <m>n</m> and <m>k</m>. -->


      <!--           </p> -->
      <!--         </li> -->
      <!--       </ol> -->
      <!--     </p> -->
      <!--   </statement> -->
      <!-- </exercise> -->

    </exercises>
  </section>

  <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-binomial">
    <title>
      The Binomial Theorem and Combinatorial Proofs
    </title>

    <subsection>
      <title>The Binomial Theorem and Binomial Coefficients</title>

      <example>
        <statement>
          <p>
            Expand the binomial: <m>(x+y)^3</m>
          </p>
        </statement>
        <solution>
          <p>
            Everyone and their pet cat will give the correct answer: <m>x^3 + 3x^2y + 3xy^2 + y^3</m>. 
          </p>
          <p>
            Why is this the case? Each term has some amount of <m>x</m>'s and <m>y</m>'s. The coefficient of the <m>x^{3-k}y^k</m> term is counting the number of terms that have <m>y^k</m>
            <m>
              (x+y)^3 = \binom30 x^3y^0 + \binom31 x^2y^1 + \binom32 x^1y^2 + \binom33 x^0y^3
            </m>
          </p>
        </solution>
      </example>

      <theorem>
        <title>The Binomial Theorem</title>
        <statement>
          <p>
            Let <m>x \and y</m> be variables and <m>n</m> a natural number, then 
            <me>
              (x+y)^n = \sum_{k=0}^n \binom{n}{k} x^{n-k} y^{k}
            </me>
          </p>
        </statement>
      </theorem>

      <definition>
        <statement>
          <p>
            We call <m>\binom{n}{k}</m> a <term>binomial coefficient</term>.
          </p>
        </statement>
      </definition>

      <note>
        <statement>
          <p>
            The binomial coefficient counts:
            <ul>
              <li> <m>\binom{n}{k}</m> is the number of ways to select <m>k</m> objects from a set of <m>n</m> objects. </li>
              <li> <m>\binom{n}{k}</m> is the coefficient of <m>x^{n-k}y^k</m> in the expansion of <m>(x+y)^n</m> </li>
              <li> <m>\binom{n}{k}</m> is the number subsets of size <m>k</m> from a set of size <m>n</m> </li>
              <li> <m>\binom{n}{k}</m> is the number of bit strings of length <m>n</m> with exactly <m>k</m> 1's</li>
              <li><m>\dots</m> there are many more ways of viewing binomial coefficients.</li>
            </ul>
          </p>
        </statement>
      </note>


    </subsection>

    <subsection>
      <title>Combinatorial Proofs</title>

      <!-- the following is adapted from https://github.com/oscarlevin/discrete-book -->
      <p>
        Let's arrange the binomial coefficients <m>{n \choose k}</m> into a triangle like follows:
      </p>
      <sidebyside width="80%">
        <image xml:id="pascal-small">
          <description>Pascal's triangle</description>
          <latex-image>
            \begin{tikzpicture}
            \def\r{.5}

            % Pascal's triangle
            %put row of 1's down left side:
            \foreach \row in {0,...,7} {
            \hexbox{\row}{0}{ 1}
            }
            %fill in the rest of the triangle:
            \foreach \row in {1,...,7} {
            \pgfmathsetmacro{\entry}{1};
            \foreach \col in {1,...,\row} {
            % iterative formula : val = precval * (row-col+1)/col
            % (+ 0.5 to bypass rounding errors)
            \pgfmathtruncatemacro{\entry}{\entry*((\row-\col+1)/\col)+0.5};
            \global\let\entry=\entry
            \ifnum \entry&lt;100
            \hexbox{\row}{\col}{\entry}
            \else \ifnum \entry&lt;1000
            \hexbox{\row}{\col}{\footnotesize \entry}
            \else \ifnum \entry&lt;10000
            \hexbox{\row}{\col}{\footnotesize \entry}
            \else
            \hexbox{\row}{\col}{\scriptsize \entry}
            \fi
            \fi
            \fi
            }
            }
            \end{tikzpicture}
          </latex-image>
        </image>
      </sidebyside>
      <p>
        There are lots of patterns hidden away in the triangle, enough to fill a reasonably sized book. Here are just a few of the most obvious ones:

        <ol>
          <li>
            <p>
              The entries on the border of the triangle are all 1.
              <me>\binom{n}{0} = \binom{n}{n} = 1</me>
            </p>
          </li>
          <li>
            <p>
              Any entry not on the border is the sum of the two entries above it.
              <me>\binom{n}{k} = \binom{n-1}{k-1} + \binom{n-1}{k}</me>
            </p>
          </li>
          <li>
            <p>
              The triangle is symmetric.  In any row, entries on the left side are mirrored on the right side.
              <me> \binom{n}{k} = \binom{n}{n - k}</me>
            </p>
          </li>
          <li>
            <p>
              The sum of all entries on a given row is a power of 2. 
              <me> \binom{n}0 + \binom{n}1 + \binom{n}2 + \dots + \binom{n}{n} = 2^n</me>
            </p>
          </li>
        </ol>
      </p>

      
      <p>
        Our goal for the remainder of the section is to give proofs of binomial identities.
      </p>

      <example>
        <statement>
          <p>
            Give an algebraic proof for the binomial identity
            <me>
              {n \choose k} = {n-1\choose k-1} + {n-1 \choose k}.
            </me>
          </p>
        </statement>
        <solution>
          <proof>
            <p>
              By the definition of <m>{n \choose k}</m>, we have
              <me>
              {n-1 \choose k-1} = \frac{(n-1)!}{(n-1-(k-1))!(k-1)!} = \frac{(n-1)!}{(n-k)!(k-1)!}</me>
              and
              <me> {n-1 \choose k} = \frac{(n-1)!}{(n-1-k)!k!}.
              </me>
            </p>

            <p>
              Thus, starting with the right-hand side of the equation:
              <md>
                <mrow> {n-1 \choose k-1} + {n-1 \choose k} \amp = \frac{(n-1)!}{(n-k)!(k-1)!}+ \frac{(n-1)!}{(n-1-k)!\,k!}</mrow>
                <mrow> \amp = \frac{(n-1)!k}{(n-k)!\,k!} + \frac{(n-1)!(n-k)}{(n-k)!\,k!}</mrow>
                <mrow> \amp = \frac{(n-1)!(k+n-k)}{(n-k)!\,k!}</mrow>
                <mrow> \amp = \frac{n!}{(n-k)!\, k!}</mrow>
                <mrow> \amp = {n \choose k}.</mrow>
              </md>
            </p>

            <p>
              The second line (where the common denominator is found) works because <m>k(k-1)! = k!</m> and <m>(n-k)(n-k-1)! = (n-k)!</m>.
            </p>
          </proof>
        </solution>
      </example>


      <example>
        <statement>
          <p>
            Give a combinotarial proof of the identity:
            <me>
              {n \choose k} = {n-1\choose k-1} + {n-1 \choose k}.
            </me>
            by viewing the binomial coefficients as counting subsets.
          </p>
        </statement>
        <solution>
          <p>
            We begin by asking a question, and answering the question in two ways:
          </p>
          <p>
            <q>How many subsets of size <m>k</m> are there from a set of size <m>n</m>?</q>
          </p>
          <p>
            Answer one: There are <m>\binom{n}{k}</m> such subsets.
          </p>
          <p>
            Answer two: Pick any element of the set. That element is either included in a subset, or it is not.
            <ul>
              <li> How many subsets contain this element? We will be picking from the remaining <m>n-1</m> elements. Since we want the subsets to have <m>k</m> elements, but we already have one of them, we have a total of <m>\binom{n-1}{k-1}</m> such subsets. </li>
              <li> How many subsets <emph>do not</emph> contain this element? We will be picking from the remaining <m>n-1</m> elements. Since we want the subsets to have <m>k</m> elements, we have <m>\binom{n-1}{k}</m> such subsets. </li>
            </ul>
            Thus there are <m>\binom{n-1}{k-1} + \binom{n-1}{k}</m> subsets of <m>k</m> elements from a set of <m>n</m> elements.
          </p>
          <p>
            Because each answer counted the same objects, but in two different ways, those answers much be the same. Thus 
            <me>
              {n \choose k} = {n-1\choose k-1} + {n-1 \choose k}.
            </me>
          </p>
        </solution>
      </example>


      <note>
        <statement>
          <p>
            For a combinatorial proof:
            <ol>
              <li> Determine a question that can be answered by the particular equation.</li>
              <li> Answer the question in two different ways</li>
              <li> Because those answers count the same object, we can equate their solutions.</li>
            </ol>
            Coming up with the question is often the hardest part.
          </p>
        </statement>
      </note>

      <example>
        <statement>
          <p>
            Give a combinatorial proof of the identities:
            <ol>
              <li>
                <m>\binom{n}0 = 1</m>.
              </li>
              <li>
                <m>\binom{n}{k} = \binom{n}{n-k}</m>
              </li>
            </ol>
            For each, what question should we answer?
          </p>
        </statement>
      </example>



      <example>
        <statement>
          <p>
            Prove the binomial identity
            <me>
              \left(\binom{n}{0}\right)^2 +\left(\binom{n}{1}\right)^2 +\left(\binom{n}{2}\right)^2 + \dots + \left(\binom{n}{n}\right)^2 = \binom{2n}{n}
            </me>
          </p>
        </statement>
        <hint>
          How many pizzas of <m>n</m> toppings can be made if we can choose from <m>2n</m> toppings? 
        </hint>
      </example>


    </subsection>
    <exercises>
      <exercise>
        <statement>
          <p>
            Prove <m>\d\sum_{k=0}^n {n \choose k} = 2^n</m>. 
          </p>
        </statement>
        <hint>
          <p>
            Here are two different ways to go about it:
            <ol>
              <li> Combinatorial proof: Answer the question <q>If a pizza place offers <m>n</m> toppings, how many pizzas can you build using any number of toppings using each topping no more than once?</q> </li>
              
              <li> Or, use the binomial theorem and set appropriate values of <m>x \and y</m>.</li>
            </ol>
          </p>
        </hint>
      </exercise>

      <exercise>
        <statement>
          <p>
            Give a combinatorial proof of the identity <m>2+2+2 = 3\cdot 2</m>.
          </p>
        </statement>
        <solution>

          <proof>
            <p>
              Question: How many 2-letter words start with <em>a</em>, <em>b</em>, or <em>c</em> and end with either <em>y</em> or <em>z</em>?
            </p>

            <p>
              Answer 1: There are two words that start with <em>a</em>, two that start with <em>b</em>, two that start with <em>c</em>, for a total of <m>2+2+2</m>.
            </p>

            <p>
              Answer 2: There are three choices for the first letter and two choices for the second letter, for a total of <m>3 \cdot 2</m>.
            </p>

            <p>
              Since the two answers are both answers to the same question, they are equal. Thus <m>2 + 2 + 2 = 3\cdot 2</m>.
            </p>
          </proof>

        </solution>
      </exercise>

      <exercise>
        <statement>
          <p>
            Give a combinatorial proof for the identity <m>1 + 2 + 3 + \cdots + n = {n+1 \choose 2}</m>.
          </p>
        </statement>
        <solution>

          <proof>
            <p>
              Question: How many subsets of <m>A = {1,2,3, \ldots, n+1}</m> contain exactly two elements?
            </p>

            <p>
              Answer 1: We must choose 2 elements from <m>n+1</m> choices, so there are <m>{n+1 \choose 2}</m> subsets.
            </p>

            <p>
              Answer 2: We break this question down into cases, based on what the larger of the two elements in the subset is. The larger element can't be 1, since we need at least one element smaller than it.
            </p>

            <p>
              Larger element is 2: there is 1 choice for the smaller element.
            </p>

            <p>
              Larger element is 3: there are 2 choices for the smaller element.
            </p>

            <p>
              Larger element is 4: there are 3 choices for the smaller element.
            </p>

            <p>
              And so on. When the larger element is <m>n+1</m>, there are <m>n</m> choices for the smaller element. Since each two element subset must be in exactly one of these cases, the total number of two element subsets is <m>1 + 2 + 3 + \cdots + n</m>.
            </p>

            <p>
              Answer 1 and answer 2 are both correct answers to the same question, so they must be equal. Therefore,
              <me>
                1 + 2 + 3 + \cdots + n = {n+1 \choose 2}
              </me>
            </p>
          </proof>

        </solution>
      </exercise>

      <exercise>
        <statement>
          <p>
            A woman is getting married. She has 15 best friends but can only select 6 of them to be her bridesmaids, one of which needs to be her maid of honor. How many ways can she do this?
          </p>

          <ol>
            <li> <p> What if she first selects the 6 bridesmaids, and then selects one of them to be the maid of honor? </p> </li>
            <li> <p> What if she first selects her maid of honor, and then 5 other bridemaids? </p> </li> <li> <p> Explain why <m>6 {15 \choose 6} = 15 {14 \choose 5}</m>. </p> </li>
          </ol>
        </statement>
        <solution>
          <p>
            <ol>
              <li> <p> She has <m>{15 \choose 6}</m> ways to select the 6 bridesmaids, and then for each way, has 6 choices for the maid of honor.  Thus she has <m>{15 \choose 6}6</m> choices. </p> </li>
              <li> <p> She has 15 choices for who will be her maid of honor.  Then she needs to select 5 of the remaining 14 friends to be bridesmaids, which she can do in <m>{14 \choose 5}</m> ways.  Thus she has <m>15 {14 \choose 5}</m> choices. </p> </li>
              <li> <p> We have answered the question (how many wedding parties can the bride choose from) in two ways.  The first way gives the left-hand side of the identity and the second way gives the right-hand side of the identity.  Therefore the identity holds. </p> </li>
            </ol>
          </p>
        </solution>
      </exercise>


      <exercise>
        <statement>
          <p>
            Give a combinatorial proof of the identity <m>{n \choose 2}{n-2 \choose k-2} = {n\choose k}{k \choose 2}</m>.
          </p>
        </statement>
        <!-- Remove solution in next edition -->
        <solution>

          <proof>
            <p>
              Question: You have a large container filled with ping-pong balls, all with a different number on them. You must select <m>k</m> of the balls, putting two of them in a jar and the others in a box. How many ways can you do this?
            </p>

            <p>
              Answer 1: First select 2 of the <m>n</m> balls to put in the jar. Then select <m>k-2</m> of the remaining <m>n-2</m> balls to put in the box. The first task can be completed in <m>{n \choose 2}</m> different ways, the second task in <m>{n-2 \choose k-2}</m> ways. Thus there are <m>{n \choose 2}{n-2 \choose k-2}</m> ways to select the balls.
            </p>

            <p>
              Answer 2: First select <m>k</m> balls from the <m>n</m> in the container. Then pick 2 of the <m>k</m> balls you picked to put in the jar, placing the remaining <m>k-2</m> in the box. The first task can be completed in <m>{n \choose k}</m> ways, the second task in <m>{k \choose 2}</m> ways. Thus there are <m>{n \choose k}{k \choose 2}</m> ways to select the balls.
            </p>

            <p>
              Since both answers count the same thing, they must be equal and the identity is established.
            </p>
          </proof>

        </solution>
      </exercise>

      <exercise>
        <statement>
          <p>
            How many ways are there to rearrange the letters in the word <q>rearrange</q>? Answer this question in at least two different ways to establish a binomial identity.
          </p>
        </statement>
        <!-- Remove solution in next edition -->
        <solution>
          <p>
            The word contains 9 letters: 3 <q>r</q>s, 2 <q>a</q>s and 2 <q>e</q>s, along with an <q>n</q> and a <q>g</q>. We could first select the positions for the <q>r</q>s in <m>{9 \choose 3}</m> ways, then the <q>a</q>s in <m>{6 \choose 2}</m> ways, the <q>e</q>s in <m>{4 \choose 2}</m> ways and then select one of the remaining two spots to put the <q>n</q> (placing the <q>g</q> in the last spot). This gives the answer
            <me>
              {9 \choose 3}{6 \choose 2}{4 \choose 2}{2\choose 1}{1\choose 1}.
            </me>
          </p>

          <p>
            Alternatively, we could select the positions of the letters in the opposite order, which would give an answer
            <me>
              {9 \choose 1}{8\choose 1}{7 \choose 2}{5\choose 2}{3\choose 3}.
            </me>
          </p>

          <p>
            (where the 3 <q>r</q>s go in the remaining 3 spots). These two expressions are equal:
            <me>
              {9 \choose 3}{6 \choose 2}{4 \choose 2}{2\choose 1}{1\choose 1} = {9 \choose 1}{8\choose 1}{7 \choose 2}{5\choose 2}{3\choose 3}.
            </me>
          </p>
        </solution>
      </exercise>


      <exercise>
        <statement>
          <p>
            Give a combinatorial proof for the identity <m>P(n,k) = {n \choose k}k!</m>
          </p>
        </statement>

        <solution>
          <proof>
            <p>
              Question: How many <m>k</m>-letter words can you make using <m>n</m> different letters without repeating any letter?
            </p>

            <p>
              Answer 1: There are <m>n</m> choices for the first letter, <m>n-1</m> choices for the second letter, <m>n-2</m> choices for the third letter, and so on until <m>n - (k-1)</m> choices for the <m>k</m>th letter (since <m>k-1</m> letters have already been assigned at that point). The product of these numbers can be written <m>\frac{n!}{(n-k)!}</m> which is <m>P(n,k)</m>.  Therefore there are <m>P(n,k)</m> words.
            </p>

            <p>
              Answer 2: First pick <m>k</m> letters to be in the word from the <m>n</m> choices. This can be done in <m>{n \choose k}</m> ways. Now arrange those letters into a word. There are <m>k</m> choices for the first letter, <m>k-1</m> choices for the second, and so on, for a total of <m>k!</m> arrangements of the <m>k</m> letters. Thus the total number of words is <m>{n \choose k}k!</m>.
            </p>

            <p>
              Since the two answers are correct answers to the same question, we have established that <m>P(n,k) = {n \choose k}k!</m>.
            </p>
          </proof>
        </solution>
      </exercise>


      <exercise>
        <statement>
          <p>
            Establish the identity below using a combinatorial proof.
            <me>
              {2 \choose 2}{n \choose 2} + {3 \choose 2}{n-1 \choose 2} + {4\choose 2}{n-2 \choose 2} + \cdots + {n\choose 2}{2\choose 2} = {n+3 \choose 5}.
            </me>
          </p>
        </statement>
        <solution>

          <proof>
            <p>
              Question: How many 5-element subsets are there of the set <m>\{1,2,\ldots, n+3\}</m>.
            </p>

            <p>
              Answer 1: We choose 5 out of the <m>n+3</m> elements, so <m>{n+3 \choose 5}</m> subsets.
            </p>

            <p>
              Answer 2: Break this up into cases by what the <q>middle</q> (third smallest) element of the 5 element subset is. The smallest this could be is a 3. In that case, we have <m>{2 \choose 2}</m> choices for the numbers below it, and <m>{n \choose 2}</m> choices for the numbers above it. Alternatively, the middle number could be a 4. In this case there are <m>{3 \choose 2}</m> choices for the bottom two numbers and <m>{n-1 \choose 2}</m> choices for the top two numbers. If the middle number is 5, then there are <m>{4 \choose 2}</m> choices for the bottom two numbers and <m>{n-2 \choose 2}</m> choices for the top two numbers. An so on, all the way up to the largest the middle number could be, which is <m>n+1</m>. In that case there are <m>{n \choose 2}</m> choices for the bottom two numbers and <m>{2 \choose 2}</m> choices for the top number. Thus the number of 5 element subsets is
              <me>
                {2 \choose 2}{n \choose 2} + {3 \choose 2}{n-1 \choose 2} + {4\choose 2}{n-2 \choose 2} + \cdots + {n\choose 2}{2\choose 2}.
              </me>
            </p>

            <p>
              Since the two answers correctly answer the same question, we have
              <me>
                {2 \choose 2}{n \choose 2} + {3 \choose 2}{n-1 \choose 2} + {4\choose 2}{n-2 \choose 2} + \cdots + {n\choose 2}{2\choose 2} = {n+3 \choose 5}.
              </me>
            </p>
          </proof>

        </solution>
      </exercise>

      <exercise>
        <statement>
          <p>
            In each polynomial below, assume <m>x</m> is some variable. Use the binomial theorem to expand and reduce modulo the appropriate number:
            <ol>
              <li><m> (x+1)^2 \pmod 2 </m></li>
              <li><m> (x+1)^5 \pmod 5 </m></li>
              <li><m> (x+1)^7 \pmod 7 </m></li>
            </ol>
            Prove that <m>(x+1)^p \equiv x^p + 1 \pmod p</m> for any prime <m>p</m>.
          </p>
        </statement>
        <solution>
          <statement>
            Here's a partial solution:
            <ol>
              <li> <m>(x+1)^2 = x^2 + 2x + 1 \equiv x^2 + 1 \pmod 2 </m></li>
              <li> <m>(x+1)^5 = x^5 + 5x^4 + 10x^3 + 10x^2 + 5x + 1 \equiv x^5 + 1 \pmod 5 </m></li>
            </ol>
            What can be said about each each binomial coefficient except the first and the last? Why?
          </statement>
        </solution>
      </exercise>
    </exercises>

  </section>

  <section xml:id="section-counting-fib">
    <title>
      A surprise connection - Counting Fibonacci numbers

    </title>

    <example>
      <statement>
        <p>
          Let's imagine that you have a rectangular grid of blank spaces. How many ways can you tile that grid using either square tiles or two-square-wide dominos.
        </p>
        <p>
          We will define an <term><m>n</m>-board</term> to be a rectangular grid of <m>n</m> spaces. 
        </p>
        <p>
          For example, here are all of the possible tilings for a 4-board:
        </p>
        <p>
          <image xml:id="tilings-of-4board">
            <description>Tilings of a 4-board: 4sq; 1dom, 2sq; sq, dom, sq; 2sq, 1dom; 2dom</description>
            <latex-image>
              % tilings of a 4 board:
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick] (0,0) rectangle (4,1);
              \node[left] at (6.5,0.5) {4 sq};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (0,0) rectangle (2,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[left] at (6.5,0.5) {1 dom, 2 sq};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (1,0) rectangle (3,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[left] at (6.5,0.5) {sq, dom, sq};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (2,0) rectangle (4,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[left] at (6.5,0.5) {2 sq, 1 dom};
              \end{tikzpicture}
              
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=gray!30] (0,0) rectangle (2,1);
              \draw[thick,fill=gray!30] (2,0) rectangle (4,1);
              \draw[thick] (0,0) rectangle (4,1);
              \node[left] at (6.5,0.5) {2 dom};
              \end{tikzpicture}
            </latex-image>
          </image>
        </p>
      </statement>
    </example>

    <example>
      <statement>
        <p>
          In how many ways can you tile a 5-board? 
        </p>
      </statement>
      <solution>
        <p>
          We know that a 5-board is just a 4-board with an extra space. How many ways are there to tile this? There are 5 ways to tile a 4-board and all we're doing is adding an extra square. There's <m>5\cdot1 = 1</m> ways to do this. 
        </p>
        <p>
          ... but a 5-board is also a 3-board with an extra two spaces at the end. How many ways can we tile this? Well, there are 3 ways to tile the three board, and we just add a domino.
        </p>
        <p>
          These two subdivisions are mutually exclusive (if we added a square to the 3-board, that's turned it into the 4-board, which was already counted above). So we can conclude the number of ways to tile a 5-board is 5+3 = 8.
        </p>
        
        <p>
          <image xml:id="tiling-5-board">
            <description>Tiling a 5-board: The 5-board is a 4-board with square plus a 3-board plus domino</description>
            <latex-image>
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2,3}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=white!20] (0,0) rectangle (5,1);
              \node[thick,fill=white!20] at (2.5,0.5) {5-board};
              \draw[thick] (0,0) rectangle (5,1);
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \draw[draw opacity=0, fill opacity=0] (0,0) rectangle (0.25,1);  % draw invisible box to center = 
              \node[thick] at (0.125,0.5) {$=$};
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2,3}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=white!20] (0,0) rectangle (4,1);
              \node[thick,fill=white!20] at (2,0.5) {4-board};
              \draw[thick] (0,0) rectangle (5,1);
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \draw[draw opacity=0, fill opacity=0] (0,0) rectangle (0.25,1);
              \node[thick] at (0.125,0.5) {$+$};
              \end{tikzpicture}
              \begin{tikzpicture}[scale=1.0]
              \foreach \col in {0,2,3}{
              \draw[] (\col,0) rectangle (\col+1, 0) rectangle (\col+2, 1);
              }
              \draw[thick,fill=white!20] (0,0) rectangle (3,1);
              \node[thick,fill=white!20] at (1.5,0.5) {3-board};
              \draw[thick,fill=gray!30] (3,0) rectangle (5,1);
              \draw[thick] (0,0) rectangle (5,1);
              \end{tikzpicture}
            </latex-image>
          </image>
        </p>
      </solution>
    </example>
    
    <theorem>
      <statement>
        <p>
          Let <m>f_n</m> denote the number of tilings for an <m>n</m>-board.  Then <m>f_0=1</m> (there is one way to tile a 0 board), and <m>f_1=1</m>, and for <m>n \ge 2</m>
          <me>
            f_{n+1} = f_{n} + f_{n-1}
          </me>
        </p>
      </statement>
      <proof>
        <p>
          In an <m>n+1</m>-board, there are <m>f_n</m> ways to tile the first <m>n</m> tiles followed by one square, and there are <m>f_{n-1}</m> to tile the first <m>n-1</m> tiles, followed by a domino. These tilings are disjoint events, and thus <m>f_{n+1} = f_{n} + f_{n-1}</m>.
        </p>
      </proof>
    </theorem>


    <corollary>
      <statement>
        <p>
          Let <m>F_n</m> by the <m>n</m>th Fibonacci number. Then <m>f_n = F_{n+1}</m> (where we'll make the notational convention that <m>f_{-1}=0</m> so our indices can match).
        </p>
      </statement>
    </corollary>


    <p>
      Let's put this to use to verify some Fibonacci identities using combinatorial proof. When we write <term>condition on <m>m</m></term> we mean to consider <q>breaking</q> the board at tile <m>m</m> and count the separate pieces.
    </p>


    <!-- This exercise comes from an identity in Proofs that Really Count -->
    <example>
      <statement>
        <p>
          For <m>n\ge 0,\, f_0 + f_1 + f_2 + \dots + f_n = f_{n+2} - 1</m>.
        </p>
      </statement>
      <hint>
        <p>
          Question: <q>How many tilings of an <m>n+2</m>-board use at least one domino?</q>
          Condition on the location of the last domino.
        </p>
      </hint>
    </example>

    <!-- This exercise comes from an identity in Proofs that Really Count -->
    <example>
      <statement>
        <p>
          For <m>n\ge 0,\, f_0 + f_2 + f_4 + \dots + f_{2n} = f_{2n+1}</m>.
        </p>
      </statement>
      <hint>
        <p>
          Condition on the location of the last square.
        </p>
      </hint>
    </example>

    <p>
      We say that a tiling of an <m>n</m>-board is <term>breakable at cell <m>k</m></term>, if the tiling can be decomposed into two tilings, one covering cells 1 through <m>k</m>, the other <m>k+1</m> through <m>n</m>. It is said to be <term>unbreakable at <m>k</m></term> otherwise. 
    </p>

    <!-- This exercise comes from an identity in Proofs that Really Count -->
    <example>
      <statement>
        <p>
          For <m>m, n \ge 0,\, f_{m+n} = f_m f_n + f_{m-1}f_{n-1}</m>. 
        </p>
      </statement>
      <hint>
        <p>
          Condition on the breakability at cell <m>m</m>.
        </p>
      </hint>
    </example>


    <!-- This exercise comes from an identity in Proofs that Really Count -->
    <example>
      <statement>
        <p>
          For <m>n \ge 0,\, \binom{n}{0} + \binom{n-1}{1} + \binom{n-2}{2} + \dots + \binom{n-n}{n} = f_n</m>. 
        </p>
        <p>
          Note that we'll define <m>\binom{n}{k} = 0</m> if <m>n \lt k</m>. This is reasonable since, for example, if you want to choose 3 objects from a set of 1 object, there are no ways to do it: i.e. <m>\binom{1}{3} = 0</m>.
        </p>
      </statement>
      <hint>
        <p>
          Condition on the number of dominoes.
        </p>
      </hint>
      <solution>
        <p>
          Question: <q>How many tilings of an <m>n</m>-board exist?</q>
        </p>
        <p>
          Answer 1: There are <m>f_n</m> tilings.
        </p>
        <p>
          Answer 2: Condition on the number of dominoes. If there are no dominoes, then from <m>n</m> cells, we have 0 choices for where to put the domino: <m>\binom{n}{0}</m>. For 1 domino, we will be using a total of <m>n-2</m> squares and domino which will span the remaining two locations. That means that we are using a total of <m>n-1</m> tiles, and so we have <m>\binom{n-1}{1}</m> possibilities. 
        </p>
        <p>
          For the case where we are using <m>i</m> dominoes, with <m>0\le i \le n/2</m>, we will be using  <m>n-2i</m> squares, or a total of <m>n-2i + i = n-i</m> tiles. To choose where to place the <m>i</m> dominoes, we'll have <m>\binom{n-i}{i}</m> ways to do this.
        </p>
        <p>
          Thus, there are a total of <m>n \ge 0, \binom{n}{0} + \binom{n-1}{1} + \binom{n-2}{2} + \dots + \binom{n-n}{n}</m> tilings of an <m>n</m> board.
        </p>
      </solution>
    </example>

    <exercises>
      
      <!-- This exercise comes from an identity in Proofs that Really Count -->
      <exercise>
        <statement>
          <p>
            Prove that <m>f_1 + f_3 + f_5 + \dots + f_{2n-1} = f_{2n} - 1</m> using a combinatorial argument.
          </p>
        </statement>
        <hint>
          <p>
            Condition on the location of the last square.
          </p>
        </hint>
      </exercise>

      <!-- This exercise comes from an identity in Proofs that Really Count -->
      <exercise>
        <statement>
          <p>
            Prove that <m>f_n^2 + f_{n+1}^2 = f_{2n+2}</m> using a combinatorial argument.
          </p>
        </statement>
        <hint>
          <p>
            Condition on the breakability of the <m>n+1</m>st space.
          </p>
        </hint>
      </exercise>

    </exercises>


  </section>

  <!-- <section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="section-counting-morecounting"> -->

  <!--   <title> -->

  <!--   </title> -->

  <!--   <exercises> -->

  <!--     <!-\- the following comes from https://github.com/oscarlevin/discrete-book -\-> -->
  <!--     <exercise> -->
  <!--       <statement> -->
  <!--         <p> -->
  <!--           Find the largest number of points which a football team cannot get exactly using just 3-point field goals and 7-point touchdowns (ignore the possibilities of safeties, missed extra points, and two point conversions). Prove your answer is correct by mathematical induction. -->
  <!--         </p> -->
  <!--       </statement> -->

  <!--     </exercise> -->

  <!--   </exercises> -->
  <!-- </section> -->
</chapter>

